---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const competences = await getCollection('competences');

// Grouper par cat√©gorie
const frontend = competences.filter(c => c.data.category === 'frontend').sort((a, b) => a.data.ordre - b.data.ordre);
const backend = competences.filter(c => c.data.category === 'backend').sort((a, b) => a.data.ordre - b.data.ordre);
const tools = competences.filter(c => c.data.category === 'tools').sort((a, b) => a.data.ordre - b.data.ordre);
const softSkills = competences.filter(c => c.data.category === 'soft-skills').sort((a, b) => a.data.ordre - b.data.ordre);

const levelColors = {
  debutant: 'bg-gray-100 text-gray-700',
  intermediaire: 'bg-blue-100 text-blue-700',
  avance: 'bg-primary-100 text-primary-700',
  expert: 'bg-purple-100 text-purple-700',
};

const levelLabels = {
  debutant: 'D√©butant',
  intermediaire: 'Interm√©diaire',
  avance: 'Avanc√©',
  expert: 'Expert',
};
---

<Layout 
  title="Mes Comp√©tences - Baptiste Dulieux"
  description="D√©couvrez mes comp√©tences techniques et humaines en d√©veloppement web"
>
  <section class="pt-32 pb-20 px-4">
    <div class="container mx-auto max-w-6xl">
      <!-- En-t√™te -->
      <div class="text-center mb-16">
        <h1 class="text-5xl font-bold text-gray-900 mb-4">
          Mes Comp√©tences
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Un aper√ßu de mes comp√©tences techniques et humaines acquises durant ma formation et mes projets.
        </p>
      </div>

      <!-- Front-end -->
      {frontend.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
            <span class="text-4xl mr-3">üíª</span>
            Front-end
          </h2>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {frontend.map(async (comp) => {
              const { Content } = await comp.render();
              return (
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
                  <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center">
                      {comp.data.icon && (
                        <span class="text-3xl mr-3">{comp.data.icon}</span>
                      )}
                      <h3 class="text-xl font-bold text-gray-900">
                        {comp.data.title}
                      </h3>
                    </div>
                    {comp.data.level && (
                      <span class={`px-3 py-1 rounded-full text-xs font-semibold ${levelColors[comp.data.level]}`}>
                        {levelLabels[comp.data.level]}
                      </span>
                    )}
                  </div>
                  <div class="prose prose-sm max-w-none text-gray-600">
                    <Content />
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      )}

      <!-- Back-end -->
      {backend.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
            <span class="text-4xl mr-3">‚öôÔ∏è</span>
            Back-end
          </h2>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {backend.map(async (comp) => {
              const { Content } = await comp.render();
              return (
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
                  <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center">
                      {comp.data.icon && (
                        <span class="text-3xl mr-3">{comp.data.icon}</span>
                      )}
                      <h3 class="text-xl font-bold text-gray-900">
                        {comp.data.title}
                      </h3>
                    </div>
                    {comp.data.level && (
                      <span class={`px-3 py-1 rounded-full text-xs font-semibold ${levelColors[comp.data.level]}`}>
                        {levelLabels[comp.data.level]}
                      </span>
                    )}
                  </div>
                  <div class="prose prose-sm max-w-none text-gray-600">
                    <Content />
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      )}

      <!-- Outils & Technologies -->
      {tools.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
            <span class="text-4xl mr-3">üõ†Ô∏è</span>
            Outils & Technologies
          </h2>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {tools.map(async (comp) => {
              const { Content } = await comp.render();
              return (
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
                  <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center">
                      {comp.data.icon && (
                        <span class="text-3xl mr-3">{comp.data.icon}</span>
                      )}
                      <h3 class="text-xl font-bold text-gray-900">
                        {comp.data.title}
                      </h3>
                    </div>
                    {comp.data.level && (
                      <span class={`px-3 py-1 rounded-full text-xs font-semibold ${levelColors[comp.data.level]}`}>
                        {levelLabels[comp.data.level]}
                      </span>
                    )}
                  </div>
                  <div class="prose prose-sm max-w-none text-gray-600">
                    <Content />
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      )}

      <!-- Soft Skills -->
      {softSkills.length > 0 && (
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
            <span class="text-4xl mr-3">üåü</span>
            Comp√©tences humaines
          </h2>
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {softSkills.map(async (comp) => {
              const { Content } = await comp.render();
              return (
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
                  <div class="flex items-center mb-4">
                    {comp.data.icon && (
                      <span class="text-3xl mr-3">{comp.data.icon}</span>
                    )}
                    <h3 class="text-xl font-bold text-gray-900">
                      {comp.data.title}
                    </h3>
                  </div>
                  <div class="prose prose-sm max-w-none text-gray-600">
                    <Content />
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      )}

      <!-- CTA -->
      <div class="mt-20 text-center bg-primary-50 rounded-2xl p-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          Int√©ress√© par mon profil ?
        </h2>
        <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
          N'h√©sitez pas √† consulter mes projets ou √† me contacter pour discuter de vos besoins.
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <a 
            href="/projets" 
            class="bg-white text-primary-600 border-2 border-primary-600 px-8 py-3 rounded-lg hover:bg-primary-50 transition font-medium"
          >
            Voir mes projets
          </a>
          <a 
            href="/contact" 
            class="bg-primary-600 text-white px-8 py-3 rounded-lg hover:bg-primary-700 transition font-medium"
          >
            Me contacter
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>